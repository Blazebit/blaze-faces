<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://blazebit.com/faces"
	xmlns:bm="http://blazebit.com/mobile"
	contentType="text/html"
    renderKitId="BLAZEFACES_MOBILE">

    <bm:page title="Notes">

        <!-- Main View -->
        <bm:view id="main" swatch="e">
            <bm:header title="Notes">
                <f:facet name="right"><b:button value="New" icon="plus" href="#new" /></f:facet>
            </bm:header>

            <bm:content>
                <h:form id="listNotesForm">
                    <b:dataList id="notesList" value="#{notesView.notes}" var="note" type="inset">
                        <b:column>
                            <b:commandLink value="#{note.shortText}" update=":newNoteForm:noteText" action="bm:new">
                                <f:setPropertyActionListener value="#{note}" target="#{notesView.note}" />
                            </b:commandLink>
                        </b:column>
                    </b:dataList>
                </h:form>
            </bm:content>

        </bm:view>

        <!-- New Notes -->
        <bm:view id="new" swatch="e">
            <bm:header title="New Note">
                <f:facet name="left"><b:button value="Back" icon="back" href="#main?reverse=true" /></f:facet>
            </bm:header>

            <bm:content>
                <h:form id="newNoteForm">
                    <b:inputTextarea id="noteText" value="#{notesView.note.text}" />

                    <b:separator />

                    <b:commandButton value="Save" action="#{notesView.save}" update="noteText :listNotesForm:notesList" icon="check" />

                </h:form>
            </bm:content>

        </bm:view>

    </bm:page>

</f:view>